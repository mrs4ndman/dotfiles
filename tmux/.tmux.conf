# mrs4ndman's Tmux config :)

# Custom keybindings
#
# Sets leader key to Ctrl + A
set -g prefix C-a
bind-key C-a send-prefix
#
unbind r
unbind n
#
# Sets Leader + R to reload config | Pone Leader + R para recargar la configuraciÃ³n
bind r source-file ~/.tmux.conf
#
# Sets Ctrl + H / V for horizontal / vertical splits in the current working directory
bind-key h split-window -v -c "#{pane_current_path}"
bind-key v split-window -h -c "#{pane_current_path}"
#
# Breaks current pane into its own window
bind-key p break-pane -d
#
# Pane resizing
bind-key -r C-h resize-pane -L
bind-key -r C-j resize-pane -D
bind-key -r C-k resize-pane -U 
bind-key -r C-l resize-pane -R
#
# Pane swapping
bind-key -r Down swap-pane -D
bind-key -r Up swap-pane -U
#
# Vim motions & usefeul binds | Atajos de Vim y algunos Ãºtiles
bind-key -r V copy-mode
set-window-option -g mode-keys vi
bind-key x kill-pane # Skip kill-pane confirmation | Se salta la confirmaciÃ³n de cerrar el "pane"

# Custom prefix-based stuff
# Scratchbuf + new window shortcut
unbind t
bind-key -r t neww
# bind-key -r T display-popup -E
bind-key -r S display-popup -E "nvim ~/scratch.md"

# Setting keybinds for lazygit, tmux-cht-sh & tmux scripts
bind-key -r g run-shell "tmux neww lazygit"
bind-key -r i run-shell "tmux neww ~/.local/scripts/tmux-cht.sh"
bind-key -r f run-shell "tmux neww ~/.local/scripts/tmux-sessionizer"
bind-key -r N run-shell "tmux neww ~/.local/scripts/tmux-navigator.sh"
# bind-key -r S run-shell "tmux neww ~/.local/scripts/tmux-sender.sh"

# Window and client navigation
# bind-key -T copy-mode-vi 'M-h' select-pane -L
# bind-key -T copy-mode-vi 'M-j' select-pane -D
# bind-key -T copy-mode-vi 'M-k' select-pane -U
# bind-key -T copy-mode-vi 'M-l' select-pane -R
# bind-key -T copy-mode-vi 'M-\' select-pane -l

bind -n M-d detach-client
bind -n M-e new-window nvim
bind -n M-f display-popup -w 50% -h 80% -E ~/.local/scripts/tmux-sessionizer
bind -n M-g display-popup -w 80% -h 80% -E lazygit
bind -n M-r source-file ~/.tmux.conf
bind -n M-q choose-session
bind -n M-t display-popup -E "tmux new-session -A -s scratch-term -c /home/mrsandman"
bind -n M-w display-popup -E ~/.local/scripts/tmux-navigator.sh
bind -n M-v split-window -h -c "#{pane_current_path}"
bind -n M-s split-window -v -c "#{pane_current_path}"
bind -n M-x kill-pane
bind -n 'M-N' next-layout
bind -n 'M-P' previous-layout
bind -n 'M-n' swap-window -dt +1
bind -n 'M-p' swap-window -dt -1
bind -n M-H switch-client -p
bind -n M-J previous-window
bind -n M-K next-window
bind -n M-L switch-client -n
bind -n M-S display-popup -E "tmux new-session -A -s scratch nvim /home/mrsandman/scratch.md"
bind -n M-T split-window -v -l 15 -c "#{pane_current_path}"
bind -n M-C neww
bind -n M-X kill-window

# Sets the status bar (and its refresh rate) on top | Coloca la barra de estado (y refresco) arriba
# set -g status-position top
set -g status-interval 1

# Mouse scroll support on Tmux (disable it on your terminal emulator if needed)
# Habilita el uso de ratÃ³n (deshabilitalo en tu emulador de terminal si interfiere)
set -g mouse on

# Setting base window number to 1 | Tomando 1 como nÃºmero de base para ventanas y divisiones
set -g base-index 1
set -g pane-base-index 1
set-option -g renumber-windows on

# NVIM integration config | ConfiguraciÃ³n para integrar con Neovim:
set-option -g focus-events on
# zero-out escape time delay
set-option -sg escape-time 0

# Sets default terminal for fixing colors inside Neovim | Fija el terminal para mantener
# los colores correctos dentro de Neovim
set -g default-terminal "tmux-256color"
set -ga terminal-features ',xterm-kitty:RGB'
set -g terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -g terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  

set-option -g allow-rename off
set -g monitor-activity on
set -g status-justify absolute-centre

# List of plugins | Lista de plugins + Gestor
set -g @plugin 'tmux-plugins/tpm' # Plugin manager | Gestor plugins
set -g @plugin 'tmux-plugins/tmux-sensible' # Sensible default config | Config de sentido comÃºn
set -g @plugin 'tmux-plugins/tmux-resurrect' # Never ending persistent sessions
set -g @plugin 'tmux-plugins/tmux-continuum' # Continuous saving + start
set -g @plugin 'tmux-plugins/tmux-yank' # System clipboard for tmux yanks
set -g @plugin 'tmux-plugins/tmux-copycat' # System clipboard for tmux yanks
set -g @plugin 'christoomey/vim-tmux-navigator' # Tmux x Neovim movement

set -g @plugin 'rose-pine/tmux' # My very own Rose Pine colorscheme
# set -g @plugin 'MunifTanjim/tmux-mode-indicator' # Cool AF mode indicator ðŸ˜‰

# Neovim stuff
set -g @vim_navigator_mapping_left "M-h"
set -g @vim_navigator_mapping_right "M-l"
set -g @vim_navigator_mapping_up "M-k"
set -g @vim_navigator_mapping_down "M-j"
set -g @vim_navigator_mapping_prev "M-p"

# RosÃ© Pine theme config
# set -g @rose_pine_variant 'main

set -g @rose_pine_status_left_prepend_section '#(cat #{socket_path}-\#{session_id}-vimbridge)'
set -g @rose_pine_status_right_append_section ' #(cat #{socket_path}-\#{session_id}-vimbridge-R)'

# set -g @rose_pine_status_left_append_section ''
# set -g @rose_pine_status_right_prepend_section ''

set -g @rose_pine_window_separator ' â†’ '
# set -g @rose_pine_disable_active_window_menu 'on'
# set -g @rose_pine_default_window_behavior 'on'
# set -g @rose_pine_show_pane_directory 'on'
# set -g @rose_pine_show_current_program 'on'
# set -g @rose_pine_only_windows 'on'


# set -g @rose_pine_user 'on' # Turn on the username component in the statusbar
# set -g @rose_pine_host 'on'
set -g @rose_pine_directory 'on'
# set -g @rose_pine_date_time '%H:%M - %a'
set -g @rose_pine_bar_bg_disable 'on' # Disables background color, for transparent terminal emulators
set -g @rose_pine_bar_bg_transparent_option '0'
set -g @rose_pine_left_separator ' > '
set -g @rose_pine_right_separator ' < '
set -g @rose_pine_field_separator ' | '

# set -g @rose_pine_show_pane_directory 'on'
# set -g @rose_pine_prioritize_windows 'on'
# set -g @rose_pine_width_to_hide '80'
# set -g @rose_pine_window_count '5'
# set -g @rose_pine_active_window_color 'love'
# set -g @rose_pine_window_status_separator ' > '
# set -g @rose_pine_window_tabs_enabled 'on' -- OLD

# Set permanent sessions = on
# set -g @continuum-restore 'on'

# Initialise TMUX plugin manager
run '~/.tmux/plugins/tpm/tpm'
set -g status-left-length 100
set -g status-right-length 100
